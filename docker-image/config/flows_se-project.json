[{"id":"618fa2.3936706","type":"tab","label":"Flow 1"},{"id":"a0762aeb.a4f0e8","type":"twitter in","z":"618fa2.3936706","twitter":"","tags":"#Trump,#trump","user":"false","name":"","topic":"tweets","inputs":0,"x":56.5,"y":271,"wires":[["8e5e9a68.610628"]]},{"id":"8e5e9a68.610628","type":"sentiment","z":"618fa2.3936706","name":"","x":218.5,"y":271,"wires":[["a6c4d6e1.ea3058"]]},{"id":"6e91d266.33929c","type":"tcp out","z":"618fa2.3936706","host":"localhost","port":"9500","beserver":"client","base64":false,"end":true,"name":"","x":1626.5,"y":323,"wires":[]},{"id":"a6c4d6e1.ea3058","type":"function","z":"618fa2.3936706","name":"complete-message-to-tcp-stream","func":"var oldMsg = msg;\nvar msg = {};\n\nmsg.payload = oldMsg;\n\nreturn msg;","outputs":1,"noerr":0,"x":479.5,"y":271,"wires":[["9a530b69.a21aa8","21a77c22.69bcb4","8e0e2ff1.c5675","f3968b2e.f03dd8","99a2665e.56f4f8","99cad9fe.4521a8","4a9acf74.a3089"]]},{"id":"9a530b69.a21aa8","type":"debug","z":"618fa2.3936706","name":"","active":true,"console":"false","complete":"true","x":751.5,"y":27,"wires":[]},{"id":"21a77c22.69bcb4","type":"debug","z":"618fa2.3936706","name":"","active":false,"console":"false","complete":"false","x":771.5,"y":74,"wires":[]},{"id":"8e0e2ff1.c5675","type":"debug","z":"618fa2.3936706","name":"","active":false,"console":"false","complete":"payload.topic","x":790.5,"y":119,"wires":[]},{"id":"99a2665e.56f4f8","type":"debug","z":"618fa2.3936706","name":"","active":false,"console":"false","complete":"payload.location","x":799.5,"y":214,"wires":[]},{"id":"f3968b2e.f03dd8","type":"debug","z":"618fa2.3936706","name":"","active":false,"console":"false","complete":"payload.tweet","x":790.5,"y":166,"wires":[]},{"id":"4c045050.6766c","type":"function","z":"618fa2.3936706","name":"stringify-payload","func":"msg.payload = JSON.stringify(msg);\n\nreturn msg;","outputs":1,"noerr":0,"x":1368.5,"y":271,"wires":[["6e91d266.33929c","9c211c8b.7b172"]]},{"id":"9c211c8b.7b172","type":"debug","z":"618fa2.3936706","name":"","active":false,"console":"false","complete":"false","x":1611.5,"y":233,"wires":[]},{"id":"246aad8.97a4d52","type":"geohash","z":"618fa2.3936706","name":"calculate-geohash","x":749.5,"y":657,"wires":[["e9712ec.582c35"]]},{"id":"288ec7ca.3d3b68","type":"http request","z":"618fa2.3936706","name":"here-api-http-request","method":"use","ret":"txt","url":"","tls":"","x":768.5,"y":533,"wires":[["1455dc6b.4ecb34"]]},{"id":"b7bd2c68.450c7","type":"function","z":"618fa2.3936706","name":"set-location-and-parameters","func":"var location = encodeURI(msg.payload.location.place);\n\nvar url = \"https://geocoder.cit.api.here.com/6.2/geocode.json\";\nvar appId = \"kKSI4QSzvHq4gDpN185v\";\nvar appCode = \"WJKIQZmBF-rTLvzQptUBTg\";\n\nvar msg = {};\nmsg.method = \"GET\";\nmsg.payload = url + \"?app_id=\" + appId + \"&app_code=\" + appCode + \"&gen=9&searchtext=\" + location;\nmsg.url = msg.payload;\n\nreturn msg;","outputs":1,"noerr":0,"x":790.5,"y":465,"wires":[["288ec7ca.3d3b68"]]},{"id":"99cad9fe.4521a8","type":"switch","z":"618fa2.3936706","name":"check-if-location-not-empty","property":"payload.location","propertyType":"msg","rules":[{"t":"nnull"},{"t":"null"}],"checkall":"true","outputs":2,"x":795.5,"y":395,"wires":[["b7bd2c68.450c7"],["e9712ec.582c35"]]},{"id":"1455dc6b.4ecb34","type":"function","z":"618fa2.3936706","name":"set-lat-long-parameters","func":"var payload = JSON.parse(msg.payload);\n\nvar msg = {};\nmsg.payload = {};\n\nmsg.payload.latitude = payload.Response.View[0].Result[0].Location.DisplayPosition.Latitude;\nmsg.payload.longitude = payload.Response.View[0].Result[0].Location.DisplayPosition.Longitude;\n\nreturn msg;","outputs":1,"noerr":0,"x":773.5,"y":599,"wires":[["246aad8.97a4d52"]]},{"id":"1857c4bd.0be4cb","type":"debug","z":"618fa2.3936706","name":"","active":false,"console":"false","complete":"false","x":1402.5,"y":469,"wires":[]},{"id":"4a9acf74.a3089","type":"join","z":"618fa2.3936706","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","timeout":"","count":"","x":1152.5,"y":270,"wires":[["4c045050.6766c","1857c4bd.0be4cb"]]},{"id":"e9712ec.582c35","type":"function","z":"618fa2.3936706","name":"msg complete","func":"msg.complete = true;\n\nreturn msg;","outputs":1,"noerr":0,"x":1163.5,"y":458,"wires":[["4a9acf74.a3089"]]}]
